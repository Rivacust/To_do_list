<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskMaster - Organize Your Life</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="logo">TaskMaster</div>
    <ul class="nav-links">
      <li><a href="#features">Features</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#testimonials">Testimonials</a></li>
      <li><a href="#auth">Sign In</a></li>
    </ul>
  </nav>

  <!-- Hero Section -->
  <header class="hero">
    <div class="hero-content">
      <h1>Stay Organized, Achieve More</h1>
      <p>TaskMaster helps you manage your daily tasks efficiently. Simple, fast, and accessible anywhere.</p>
      <a href="#auth" class="cta-btn">Get Started</a>
    </div>
  </header>

  <!-- Features Section -->
  <section class="features" id="features">
    <h2>Features</h2>
    <div class="feature-cards">
      <div class="card"><h3>Easy To-Use</h3><p>Create and track tasks effortlessly.</p></div>
      <div class="card"><h3>Cross-Platform</h3><p>Access your tasks from any device.</p></div>
      <div class="card"><h3>Stay Productive</h3><p>Focus on what matters most each day.</p></div>
    </div>
  </section>

  <!-- About Section -->
  <section class="about" id="about">
    <h2>About Us</h2>
    <p>TaskMaster is designed to help busy individuals stay organized. Productivity should be simple and efficient.</p>
  </section>

  <!-- Testimonials Section -->
  <section class="testimonials" id="testimonials">
    <h2>What Users Say</h2>
    <div class="testimonial-cards">
      <div class="testimonial-card"><p>"TaskMaster transformed the way I organize my day!"</p><span>- Alex</span></div>
      <div class="testimonial-card"><p>"Finally, a to-do app that is simple and elegant."</p><span>- Maria</span></div>
    </div>
  </section>

  <!-- Sign In Section -->
  <section class="auth" id="auth">
    <div class="auth-container">
      <h2>Sign In</h2>
      <form id="signinForm">
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit">Sign In</button>
      </form>
      <p>Don't have an account? <a href="signup.html">Sign Up</a></p>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 TaskMaster. All rights reserved.</p>
  </footer>

  <!-- Sign-In Script -->
  <script>
    const signinForm = document.getElementById('signinForm');

    signinForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = {
        email: signinForm.email.value,
        password: signinForm.password.value
      };

      try {
        const res = await fetch('http://127.0.0.1:5000/signin', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(data)
        });

        const result = await res.json();

        if (res.ok) {
          // Save user_id in localStorage for dashboard
          localStorage.setItem('user_id', result.user_id);
          alert(result.message);

          // Redirect to dashboard page
          window.location.href = "dashboard.html";
        } else {
          alert(result.error);
        }
      } catch (err) {
        alert("Server error. Please try again later.");
      }
    });
  </script>

</body>
</html>
